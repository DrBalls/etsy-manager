<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Etsy Store Manager</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' http://localhost:3000 https://*.etsymanager.com; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' http://localhost:3000 https://*.etsymanager.com ws://localhost:3000 wss://*.etsymanager.com">
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f5f5f5;
      }
      
      #app {
        height: 100vh;
        display: flex;
        flex-direction: column;
      }
      
      #titlebar {
        -webkit-app-region: drag;
        height: 32px;
        background: #f1641e;
        display: flex;
        align-items: center;
        padding: 0 16px;
        color: white;
        font-size: 14px;
        font-weight: 500;
      }
      
      #titlebar.darwin {
        padding-left: 80px;
      }
      
      #controls {
        -webkit-app-region: no-drag;
        margin-left: auto;
        display: flex;
        gap: 8px;
      }
      
      #controls button {
        background: none;
        border: none;
        color: white;
        font-size: 18px;
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 4px;
        transition: background 0.2s;
      }
      
      #controls button:hover {
        background: rgba(255, 255, 255, 0.2);
      }
      
      #webview-container {
        flex: 1;
        position: relative;
      }
      
      #webview {
        width: 100%;
        height: 100%;
        border: none;
      }
      
      #loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }
      
      #loading-spinner {
        width: 48px;
        height: 48px;
        border: 3px solid #e1e3df;
        border-top-color: #f1641e;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 16px;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      #error {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        max-width: 400px;
      }
      
      #error h2 {
        color: #d73502;
        margin: 0 0 16px;
      }
      
      #error p {
        color: #595959;
        margin: 0 0 24px;
        line-height: 1.5;
      }
      
      .btn {
        padding: 10px 20px;
        background: #f1641e;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s;
      }
      
      .btn:hover {
        background: #d9531a;
      }
      
      .btn-secondary {
        background: white;
        color: #222;
        border: 1px solid #e1e3df;
      }
      
      .btn-secondary:hover {
        background: #f5f5f5;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div id="titlebar">
        <span>Etsy Store Manager</span>
        <div id="controls">
          <button id="minimize">−</button>
          <button id="maximize">□</button>
          <button id="close">×</button>
        </div>
      </div>
      
      <div id="webview-container">
        <webview id="webview" 
          partition="persist:etsy-manager"
          allowpopups
          nodeintegration="false"
          webpreferences="contextIsolation=true"
          style="display: none;">
        </webview>
        
        <div id="loading">
          <div id="loading-spinner"></div>
          <p>Connecting to Etsy Store Manager...</p>
        </div>
        
        <div id="error" style="display: none;">
          <h2>Connection Error</h2>
          <p id="error-message">Unable to connect to the Etsy Store Manager server.</p>
          <button class="btn" id="retry">Retry</button>
          <button class="btn btn-secondary" id="settings">Settings</button>
        </div>
      </div>
    </div>
    
    <script src="./renderer.js"></script>
  </body>
</html>